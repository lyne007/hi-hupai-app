{"version":3,"sources":["uni-app:///main.js","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/share/topic.vue?e802","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/share/topic.vue?771a","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/share/topic.vue?13f2","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/share/topic.vue?0918","uni-app:///pages/share/topic.vue","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/share/topic.vue?90b1","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/share/topic.vue?38e4"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,6F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,oMAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpDA;AAAA;AAAA;AAAA;AAA+lB,CAAgB,ynBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmCnnB;AACA;AACA;;AAEA;AACA;;AAEA,qF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AARA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;eAGA,EACA,yBADA,EAEA,IAFA,kBAEA,CACA,SACA,aADA,EAEA,UAFA,EAGA,YAHA,EAIA,UAJA,EAKA,aALA,EAKA;AACA,mBANA,EAMA;AACA,iBAPA,EAOA;AACA,mBARA,EAQA;AACA,oBATA,EASA;AACA,mBAVA,EAUA;AACA,oBAXA,EAWA;AACA,sBAZA,EAYA;AACA,iBAbA,EAaA;AACA,oBAdA,EAcA;AACA,eAfA,EAeA;AACA,kBAhBA,EAgBA;AACA,mBAjBA,EAiBA;AACA,yBAlBA,EAkBA;AACA,oBAnBA,EAoBA,gBApBA,EAqBA,YArBA,EAsBA,WAtBA,EAuBA,WAvBA,EAwBA,cAxBA,EAyBA,SAzBA,EA0BA,kBA1BA,EA2BA,QA3BA,EA4BA,gBA5BA,EA6BA,eA7BA,EA8BA,gBA9BA,EA+BA,WA/BA,EAgCA,eAhCA,EAiCA,iBAjCA,EAkCA,aAlCA,GAoCA,CAvCA,EAwCA,MAxCA,kBAwCA,GAxCA,EAwCA,CACA,iBACA,sBACA,2BACA,gDACA,gGACA,oBACA,CA/CA,EAgDA,YACA,OADA,qBACA,CACA,oDACA,CAHA,EAIA;AACA;AACA;AACA,YAPA,sBAOA,CACA;AACA,KATA,EAhDA;;AA2DA;AACA;AACA,aADA,mBACA,QADA,EACA;AACA;AACA;AACA;AACA,OALA;AAMA,gBANA,EADA;;AASA;AACA,aADA,mBACA,QADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA,OAPA;AAQA,gBARA,EATA,EA3DA;;;AA+EA;AACA;AACA,gBAFA,0BAEA;AACA;AACA;AACA;AACA,KANA;AAOA,aAPA,uBAOA;AACA;AACA,yBADA;AAEA,gDAFA;AAGA,0BAHA;;AAKA,KAbA;AAcA,eAdA,yBAcA;AACA,+BADA,CACA;AACA,KAhBA;AAiBA;AACA,eAlBA,yBAkBA;AACA;AACA;AACA,cADA;AAEA,cAFA;AAGA,kBAHA;;AAKA,UALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCADA;AAEA,qBAFA,mBAEA,KAFA,EAEA;AACA;AACA;AACA,eALA;;AAOA;AACA;AACA,SAZA,MAYA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA,WANA,MAMA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAFA;AAGA;AACA;AACA,qCADA;AAEA,qBAFA,mBAEA,KAFA,EAEA;AACA;AACA;AACA,eALA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,uBAFA,mBAEA,KAFA,EAEA;AACA;AACA;AACA,iBALA;;AAOA,aARA,MAQA;AACA;AACA;AACA;AACA;AACA,OA3EA;AA4EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAzJA;AA0JA,YA1JA,sBA0JA;AACA;AACA;AACA;AACA;AACA,iCADA,EACA;AACA,kCAFA,EAEA;AACA,oCAHA,EAGA;AACA,iCAJA,EAIA;AACA,oCALA,EAKA;AACA,yCANA,EAMA;AACA,yCAPA,EAOA;AACA;AACA,oBADA,CARA;AAUA;AACA,iCAXA,EAWA;AACA,6BAZA;AAaA,mCAbA;AAcA,iCAdA;AAeA,qCAfA;AAgBA,gEAhBA;AAiBA,6BAjBA;AAkBA,2BAlBA;AAmBA,uCAnBA;AAoBA,mCApBA;AAqBA,uCArBA;AAsBA,yCAtBA;AAuBA,2DAvBA,EAuBA;AACA,iDAxBA;AAyBA,0CAzBA;AA0BA,+CA1BA,EA0BA;AACA,uCA3BA,EA2BA;AACA,iDA5BA;AA6BA,+CA7BA;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA,MAKA;AACA;AACA;AACA;AACA;AACA,SALA,MAKA;AACA;AACA;AACA;AACA;AACA,SALA,MAKA;AACA;AACA;AACA;AACA;AACA;AACA,OAvBA,MAuBA;AACA;AACA;AACA;AACA;AACA;AACA,SALA,MAKA;AACA;AACA;AACA;AACA;AACA,SALA,MAKA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA,OAzBA,MAyBA;AACA;AACA;AACA;AACA;AACA;AACA,KAnPA;AAoPA,WApPA,mBAoPA,CApPA,EAoPA;AACA;AACA;AACA,KAvPA;AAwPA,UAxPA,oBAwPA;AACA;AACA;AACA,kDADA;AAEA,iDAFA;AAGA,yBAHA;;AAKA,KA/PA;AAgQA,OAhQA,iBAgQA;AACA;AACA;AACA,eADA,mBACA,GADA,EACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA,SAPA;;AASA;AACA;AACA,iBADA,mBACA,GADA,EACA;AACA;AACA,WAHA;;AAKA;AACA;AACA,mDADA;AAEA,8CAFA;AAGA,eAHA,mBAGA,GAHA,EAGA;AACA;AACA;AACA,uCADA;AAEA,qBAFA,qBAEA;AACA;AACA,2DADA;AAEA,8BAFA;AAGA,gCAHA;;AAKA,eARA;AASA,kBATA,gBASA,GATA,EASA;AACA;AACA;AACA;AACA;AACA,yDADA;AAEA,8BAFA;AAGA,gCAHA;;AAKA,eAlBA;;AAoBA;AACA,SA1BA;;AA4BA,KA9SA;AA+SA,gBA/SA,0BA+SA;AACA,mCADA,CACA;AACA;AACA,wBADA,EACA;AACA,uBAFA,CAEA;AAFA;AAIA,KArTA,EA/EA,E;;;;;;;;;;;;;AC5CA;AAAA;AAAA;AAAA;AAAynC,CAAgB,mmCAAG,EAAC,C;;;;;;;;;;;ACA7oC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/share/topic.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/share/topic.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./topic.vue?vue&type=template&id=42d2b0d4&scoped=true&\"\nvar renderjs\nimport script from \"./topic.vue?vue&type=script&lang=js&\"\nexport * from \"./topic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./topic.vue?vue&type=style&index=0&id=42d2b0d4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"42d2b0d4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/share/topic.vue\"\nexport default component.exports","export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./topic.vue?vue&type=template&id=42d2b0d4&scoped=true&\"","var components\ntry {\n  components = {\n    quiPage: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-page/qui-page\" */ \"@/components/qui-page/qui-page.vue\"\n      )\n    },\n    quiToast: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-toast/qui-toast\" */ \"@/components/qui-toast/qui-toast.vue\"\n      )\n    },\n    quiButton: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-button/qui-button\" */ \"@/components/qui-button/qui-button.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.i18n.t(\"share.savealbum\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./topic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./topic.vue?vue&type=script&lang=js&\"","<template>\n  <qui-page :data-qui-theme=\"theme\" class=\"quipage\">\n    <view class=\"painter\">\n      <view class=\"canvas-box\" :style=\"{ paddingTop: paddingtop + 'rpx' }\">\n        <view class=\"cent\" :style=\"{ height: constyle + 'rpx' }\">\n          <image\n            :src=\"imagePath\"\n            :mode=\"widthFix\"\n            @tap=\"previewImage\"\n            :show-menu-by-longpress=\"true\"\n            class=\"cent-image\"\n          ></image>\n        </view>\n        <view class=\"box-img\">\n          <painter\n            custom-style=\"margin-left: 40rpx; height: 0rpx; position:fixed\"\n            :palette=\"template\"\n            @imgErr=\"imgErr\"\n            @imgOK=\"onImgOK\"\n            width-pixels=\"1040\"\n          />\n        </view>\n      </view>\n      <qui-toast ref=\"toast\"></qui-toast>\n      <view class=\"btn-box\">\n        <qui-button type=\"primary\" size=\"large\" @click=\"fun\">\n          {{ i18n.t('share.savealbum') }}\n        </qui-button>\n      </view>\n    </view>\n  </qui-page>\n</template>\n\n<script>\n// import Carda from '@/wxcomponents/card/cardtposter'; // 标题文字海报 41\nimport Cardk from '@/wxcomponents/card/cardtpostertwo'; // 标题文字海报 41\nimport Cardb from '@/wxcomponents/card/cardaitu'; // 标题单图片文字海报 43\nimport Cardd from '@/wxcomponents/card/cardimg'; // 纯图片海报  164\n// import Cardf from '@/wxcomponents/card/cardpicture'; // 标题多图片海报 41\nimport Cardg from '@/wxcomponents/card/cardvideo'; // 视频海报 43\nimport Cardh from '@/wxcomponents/card/card'; // 文字海报  46\n// import Cardi from '@/wxcomponents/card/cardtext';\nimport forums from '@/mixin/forums';\n\nexport default {\n  mixins: [forums],\n  data() {\n    return {\n      imagePath: '',\n      width: 700,\n      template: {},\n      userid: '',\n      slitename: '', // 站点名称\n      slitelogo: '', // 站点logo\n      themeid: '', // 数据id\n      headerImg: '', // 头像\n      headerName: '', // 名字\n      postyTepy: '', // 帖子类型\n      subHeading: '', // 小标题\n      contentTitle: '', // 内容标题\n      content: '', // 内容\n      contentImg: [], // 内容照片\n      video: '', // 视频帖子\n      videoduc: '', // 视频文件名\n      videotime: '', // 视频时间\n      attachmentsType: '', // 话题分类\n      themwidth: 180,\n      renamewidth: 400,\n      reconame: '',\n      recoimg: '',\n      constyle: 0,\n      paddingtop: 43,\n      imgtop: 0,\n      jurisdiction: true,\n      that: '',\n      attachlength: 97,\n      marglength: 160,\n      heightdefill: '',\n      picutre: '',\n      picutrecopy: '',\n      contentheight: '',\n      implement: '',\n    };\n  },\n  onLoad(arr) {\n    this.showToast();\n    this.themeid = arr.id;\n    this.userid = this.usersid;\n    this.slitename = this.forums.set_site.site_name;\n    this.slitelogo = this.forums.set_site.site_logo || `${this.$u.host()}static/logo.png`;\n    this.getusertitle();\n  },\n  computed: {\n    usersid() {\n      return this.$store.getters['session/get']('userId');\n    },\n    // themedata() {\n    //   return this.$store.getters['jv/get'](`threads/${this.themeid}`);\n    // },\n    userInfo() {\n      return this.$store.getters['jv/get'](`users/${this.userid}`);\n    },\n  },\n  watch: {\n    heightdefill: {\n      handler(newValue) {\n        if (newValue || newValue === 0) {\n          this.initData();\n        }\n      },\n      deep: true,\n    },\n    content: {\n      handler(newValue) {\n        if (newValue) {\n          if (this.implement) {\n            this.initData();\n          }\n        }\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    // 获取用户信息\n    getusertitle() {\n      this.reconame = this.userInfo.username;\n      this.recoimg = this.userInfo.avatarUrl || `${this.$u.host()}static/noavatar.gif`;\n      this.getthemdata();\n    },\n    showToast() {\n      this.$refs.toast.showLoading({\n        icon: 'icon-load',\n        message: this.i18n.t('share.generating'),\n        position: 'middle',\n      });\n    },\n    openLoading() {\n      this.$refs.toast.close(); // 或者 this.$refs.toast.close();\n    },\n    // 获取帖子内容信息\n    getthemdata() {\n      const that = this;\n      this.$store\n        .dispatch(\n          'jv/get',\n          `threads/${this.themeid}?include=user,firstPost,firstPost.images,threadVideo,category`,\n        )\n        .then(data => {\n          this.headerName = data.user.username;\n          this.postyTepy = data.type;\n          this.headerImg = data.user.avatarUrl || `${this.$u.host()}static/images/noavatar.gif`;\n          if (data.price > 0) {\n            this.contentImg.push(this.slitelogo);\n            if (this.contentImg) {\n              uni.getImageInfo({\n                src: that.contentImg[0],\n                success(image) {\n                  const num = image.width / (image.height / 100);\n                  that.heightdefill = (700 - num) / 2;\n                },\n              });\n            }\n            this.attachmentsType = data.category.name;\n          } else {\n            if (data.firstPost.images.length >= 1 || this.postyTepy === 2) {\n              if (this.postyTepy === 2 && data.threadVideo.cover_url) {\n                this.implement = false;\n              } else {\n                this.implement = false;\n              }\n            } else {\n              this.implement = true;\n            }\n\n            const arr = Object.values(data.firstPost.images);\n            arr.forEach(value => {\n              this.contentImg.push(value.url || value.thumbUrl);\n            });\n            if (this.contentImg) {\n              uni.getImageInfo({\n                src: that.contentImg[0],\n                success(image) {\n                  const num = image.height * (620 / image.width);\n                  that.heightdefill = num - 402;\n                },\n              });\n            }\n            this.contentTitle = data.title;\n            this.content = data.firstPost.content;\n            const n = this.content.length - this.content.replace(/[\\r\\n]/g, '').length;\n            if (this.content) {\n              const num = Math.ceil(this.content.length / 23) + n;\n              if (num >= 11) {\n                this.contentheight = 0;\n              } else {\n                this.contentheight = 472 - num * 42;\n              }\n            }\n            this.attachmentsType = data.category.name;\n            this.attachlength = this.attachmentsType.length * 24 + 3;\n            this.marglength = this.attachlength + 40;\n            if (this.postyTepy === 2) {\n              this.video = data.threadVideo.cover_url;\n              this.videoduc = data.threadVideo.file_name;\n              if (this.video) {\n                uni.getImageInfo({\n                  src: that.video,\n                  success(image) {\n                    const num = image.height * (620 / image.width);\n                    that.heightdefill = num - 402;\n                  },\n                });\n              } else {\n                that.heightdefill = 0;\n              }\n            }\n          }\n        });\n      // this.headerName = this.themedata.user.username;\n      // this.postyTepy = this.themedata.type;\n      // this.headerImg =\n      //   this.themedata.user.avatarUrl || `${this.$u.host()}static/images/noavatar.gif`;\n      // if (this.themedata.firstPost.images.length >= 1 || this.postyTepy === 2) {\n      //   this.implement = false;\n      // } else {\n      //   this.implement = true;\n      // }\n      // console.log(this.implement);\n      // const arr = Object.values(this.themedata.firstPost.images);\n      // arr.forEach(value => {\n      //   this.contentImg.push(value.thumbUrl || value.url);\n      // });\n      // if (this.contentImg) {\n      //   uni.getImageInfo({\n      //     src: that.contentImg[0],\n      //     success(image) {\n      //       const num = image.height * (620 / image.width);\n      //       if (num > 402) {\n      //         that.heightdefill = num - 402;\n      //       } else {\n      //         that.heightdefill = 0;\n      //       }\n      //     },\n      //   });\n      // }  str = str.replace(/↵/g,\"<br/>\");\n      // this.contentTitle = this.themedata.title;\n      // this.content = this.themedata.firstPost.content;\n      // console.log(this.content);\n      // if (this.content) {\n      //   const num = Math.ceil(this.content.length / 23);\n      //   if (num >= 11) {\n      //     this.contentheight = 0;\n      //   } else {\n      //     this.contentheight = 472 - num * 42;\n      //   }\n      // }\n      // console.log(this.contentheight);\n      // this.attachmentsType = this.themedata.category.name;\n      // this.attachlength = this.attachmentsType.length * 24 + 3;\n      // this.marglength = this.attachlength + 40;\n      // if (this.postyTepy === 2) {\n      //   this.video = this.themedata.threadVideo.cover_url;\n      //   this.videoduc = this.themedata.threadVideo.file_name;\n      //   uni.getImageInfo({\n      //     src: that.video,\n      //     success(image) {\n      //       const num = image.height * (620 / image.width);\n      //       if (num > 402) {\n      //         that.heightdefill = num - 402;\n      //       } else {\n      //         that.heightdefill = 0;\n      //       }\n      //     },\n      //   });\n      // }\n    },\n    initData() {\n      if (!this.contentTitle) {\n        this.imgtop = 80;\n      }\n      const obj = {\n        username: this.headerName, // 名字\n        userheader: this.headerImg, // 头像\n        usertitle: this.contentTitle, // 内容标题\n        usercontent: this.content, // 内容\n        usercontimg: this.contentImg, // 内容图片\n        userattname: this.attachmentsName, // 帖子内容名称\n        useratttype: this.attachmentsType, // 帖子分类\n        userweixincode: `${this.$u.host()}api/oauth/wechat/miniprogram/code?path=/topic/index?id=${\n          this.themeid\n        }`, // 微信二维码\n        slitename: this.slitename, // 站点名称\n        uservideo: this.video,\n        uservideoduc: this.videoduc,\n        namewidth: this.themwidth,\n        renamewidth: this.renamewidth,\n        reconame: this.reconame + this.i18n.t('share.recomment'),\n        recoimg: this.recoimg,\n        imgtop: this.imgtop,\n        attachlength: this.attachlength,\n        marglength: this.marglength,\n        heightdefill: this.heightdefill,\n        contentheight: this.contentheight,\n        longpressrecog: this.i18n.t('share.longpressrecog'), // 长按识别\n        recomment: this.i18n.t('share.recomment'),\n        goddessvideo: this.attachmentsType,\n        comefrom: this.i18n.t('share.comefrom'), // 来自\n        stay: this.i18n.t('share.stay'), // 在\n        published: this.i18n.t('share.published'),\n        contents: this.i18n.t('share.contents'),\n      };\n      if (this.contentTitle) {\n        // 有标题有图片海报\n        if (this.contentImg.length === 1) {\n          this.constyle = 1100 + this.heightdefill;\n          this.paddingtop = 43;\n          this.template = new Cardb().palette(obj);\n          // 多图片海报\n        } else if (this.contentImg.length > 1) {\n          this.constyle = 1100 + this.heightdefill;\n          this.paddingtop = 43;\n          this.template = new Cardb().palette(obj);\n          // 只有标题文字的海报\n        } else if (this.contentImg.length === 0 && this.content) {\n          this.constyle = 1083 - this.contentheight;\n          this.paddingtop = 41;\n          this.template = new Cardk().palette(obj);\n          // 视频贴\n        } else if (this.postyTepy === 2) {\n          this.constyle = 1100 + this.heightdefill;\n          this.paddingtop = 43;\n          this.template = new Cardg().palette(obj);\n        }\n        // 没有标题的海报\n      } else if (!this.contentTitle) {\n        if (this.content && this.contentImg.length === 1) {\n          this.constyle = 1100 + this.heightdefill;\n          this.paddingtop = 43;\n          this.template = new Cardb().palette(obj);\n          // 只有一张图片\n        } else if (!this.content && this.contentImg.length === 1) {\n          this.constyle = 728;\n          this.paddingtop = 90;\n          this.template = new Cardd().palette(obj);\n          // 多图片没标题内容海报\n        } else if (this.content && this.contentImg.length > 1) {\n          this.constyle = 1100 + this.heightdefill;\n          this.paddingtop = 43;\n          this.template = new Cardb().palette(obj);\n        } else if (this.postyTepy === 2) {\n          this.constyle = 1100 + this.heightdefill;\n          this.paddingtop = 43;\n          this.template = new Cardg().palette(obj);\n        } else {\n          this.constyle = 1082 - this.contentheight;\n          this.paddingtop = 46;\n          // this.template = new Cardh().palette(obj);\n          this.template = new Cardh().palette(obj);\n        }\n      } else {\n        this.constyle = 1082 - this.contentheight;\n        this.paddingtop = 46;\n        // this.template = new Cardh().palette();\n        this.template = new Cardh().palette(obj);\n      }\n    },\n    onImgOK(e) {\n      this.imagePath = e.detail.path;\n      this.openLoading();\n    },\n    imgErr() {\n      this.openLoading();\n      uni.showModal({\n        title: this.i18n.t('discuzq.msgbox.title'),\n        content: this.i18n.t('share.buildfailed'),\n        showCancel: false,\n      });\n    },\n    fun() {\n      const _this = this;\n      uni.getSetting({\n        success(res) {\n          if (!res.authSetting['scope.writePhotosAlbum']) {\n            _this.jurisdiction = false;\n          } else {\n            _this.jurisdiction = res.authSetting['scope.writePhotosAlbum'];\n          }\n        },\n      });\n      if (!this.jurisdiction) {\n        uni.openSetting({\n          success(res) {\n            _this.jurisdiction = res.authSetting['scope.writePhotosAlbum'];\n          },\n        });\n      }\n      uni.showModal({\n        title: _this.i18n.t('discuzq.msgbox.title'),\n        content: _this.i18n.t('share.confirm'),\n        success(res) {\n          if (res.confirm) {\n            uni.saveImageToPhotosAlbum({\n              filePath: _this.imagePath,\n              success() {\n                uni.showToast({\n                  title: _this.i18n.t('share.successfully'),\n                  icon: 'none',\n                  duration: 2000,\n                });\n              },\n              fail(err) {\n                if (err.errMsg === 'saveImageToPhotosAlbum:fail auth deny') {\n                  _this.jurisdiction = false;\n                }\n                uni.showToast({\n                  title: _this.i18n.t('share.savefailed'),\n                  icon: 'none',\n                  duration: 2000,\n                });\n              },\n            });\n          }\n        },\n      });\n    },\n    previewImage() {\n      const currimg = this.imagePath; // 这里获取到的是一张本地的图片\n      uni.previewImage({\n        current: currimg, // 需要预览的图片链接列表\n        urls: [currimg], // 当前显示图片的链接\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/styles/base/variable/global.scss';\n@import '@/styles/base/theme/fn.scss';\n.quipage {\n  width: 100vw;\n  height: 100vh;\n}\n.painter {\n  display: flex;\n  min-height: 100vh;\n  flex-direction: column;\n  justify-content: space-between;\n  background-color: --color(--qui-BG-2);\n}\n.canvas-box {\n  // width: 100%;\n  // height: 100vh;\n  margin-bottom: 155rpx;\n}\n.cent {\n  width: 700rpx;\n  margin: 0 auto;\n  background: --color(--qui-FC-FFF);\n  border-radius: 7rpx;\n  box-shadow: 0 3rpx 6rpx rgba(0, 0, 0, 0.16);\n  .cent-image {\n    width: 100%;\n    height: 100%;\n  }\n}\n#front {\n  position: fixed;\n  width: 0;\n  height: 0;\n}\n.btn-box {\n  margin: 0 auto 40rpx;\n}\n</style>\n","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./topic.vue?vue&type=style&index=0&id=42d2b0d4&lang=scss&scoped=true&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./topic.vue?vue&type=style&index=0&id=42d2b0d4&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1636533856538\n      var cssReload = require(\"G:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}