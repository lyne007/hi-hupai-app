{"version":3,"sources":["uni-app:///main.js","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/my/profile.vue?1b10","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/my/profile.vue?5819","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/my/profile.vue?adbc","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/my/profile.vue?66aa","uni-app:///pages/my/profile.vue","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/my/profile.vue?26dd","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/my/profile.vue?1ec9"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,8F;AACAA,UAAU,CAACC,gBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AAC2D;AACL;AACsC;;;AAG5F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,aAAa,0PAEN;AACP,KAAK;AACL;AACA,aAAa,sQAEN;AACP,KAAK;AACL;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,kRAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5HA;AAAA;AAAA;AAAA;AAAimB,CAAgB,2nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwIrnB;AACA;AACA;;AAEA,mE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2WAKA,EACA,8CADA,EAEA,SACA,eADA,EAEA,oBAFA,CAFA,EASA,IATA,kBASA,CACA,SACA,kBADA,EAEA,UAFA,EAGA,YAHA,EAIA,WAJA,EAKA,QALA,EAMA,WANA,EAOA,gCAPA,EAQA,oDARA,CAQA;AARA,MAaA,CAvBA,EAwBA;AACA,QAzBA,oBAyBA,CACA,mBACA,CA3BA,EA4BA,MA5BA,oBA4BA,CACA,+CACA,gBACA,sCADA,GAGA,kBACA,OADA,GAOA,CAxCA,EAyCA,WACA,SADA,uBACA,CAEA,iDACA,4BACA,CAFA,MAEA,CACA,iBACA,mDADA,IAGA,CAaA,CAtBA,EAuBA,UAvBA,wBAuBA,CACA;AACA,+BACA,iBACA,WADA,EAEA,iCAFA,IAKA,mCACA,mCACA,kDAaA,OACA,CAxBA,CAyBA;AACA,+DACA,yBACA,CA5BA,CA6BA;AACA,UACA,sBACA,4BADA,IAEA,WAFA,IAGA,mBAHA,IAIA,uCALA,EAMA,CACA,iBACA,WADA,EAEA,iCAFA,IAIA,oCACA,oCACA,6BACA,CACA,CApEA,EAqEA,WArEA,yBAqEA,kBACA,gGACA,mCACA,oBACA,oBACA,gBACA,aADA,EAEA,cAFA,IAIA,CACA,CATA,EAUA,CAhFA,EAiFA,WAjFA,yBAiFA,CACA,0BACA,CAnFA,EAoFA,eApFA,6BAoFA,CAEA,0BAKA,CA3FA,EA4FA,eA5FA,6BA4FA,CACA,8BACA,CA9FA;AA+FA,eA/FA,yBA+FA;AACA;AACA,gCADA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA,WANA,MAMA;AACA;AACA;;;;;;;;;;;;;;;;;;AAkBA;AACA,qCADA;AAEA,kCAFA;;AAIA;AACA;AACA,OArCA;AAsCA,KAzIA;AA0IA,iBA1IA,yBA0IA,GA1IA,EA0IA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA,YADA,GACA,8BADA,CACA,IADA;AAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA,KA1JA;AA2JA,gBA3JA,0BA2JA;AACA;AACA,KA7JA;AA8JA,iBA9JA,2BA8JA;AACA;AACA,KAhKA;;AAkKA,eAlKA,yBAkKA;AACA;AACA,KApKA,EAzCA,E;;;;;;;;;;;;;ACjJA;AAAA;AAAA;AAAA;AAA2nC,CAAgB,qmCAAG,EAAC,C;;;;;;;;;;;ACA/oC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/my/profile.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/my/profile.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./profile.vue?vue&type=template&id=1b5be302&scoped=true&\"\nvar renderjs\nimport script from \"./profile.vue?vue&type=script&lang=js&\"\nexport * from \"./profile.vue?vue&type=script&lang=js&\"\nimport style0 from \"./profile.vue?vue&type=style&index=0&id=1b5be302&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b5be302\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/my/profile.vue\"\nexport default component.exports","export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./profile.vue?vue&type=template&id=1b5be302&scoped=true&\"","var components\ntry {\n  components = {\n    quiPage: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-page/qui-page\" */ \"@/components/qui-page/qui-page.vue\"\n      )\n    },\n    quiCellItem: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-cell-item/qui-cell-item\" */ \"@/components/qui-cell-item/qui-cell-item.vue\"\n      )\n    },\n    quiAvatar: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-avatar/qui-avatar\" */ \"@/components/qui-avatar/qui-avatar.vue\"\n      )\n    },\n    quiUploader: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-uploader/qui-uploader\" */ \"@/components/qui-uploader/qui-uploader.vue\"\n      )\n    },\n    quiToast: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-toast/qui-toast\" */ \"@/components/qui-toast/qui-toast.vue\"\n      )\n    },\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    quiAuthPhone: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-auth-phone/qui-auth-phone\" */ \"@/components/qui-auth-phone/qui-auth-phone.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.profile.canEditUsername ? _vm.i18n.t(\"profile.username\") : null\n  var g1 = !_vm.profile.canEditUsername ? _vm.i18n.t(\"profile.username\") : null\n  var g2 = _vm.i18n.t(\"profile.avatar\")\n  var g3 =\n    _vm.forums.qcloud && _vm.forums.qcloud.qcloud_sms\n      ? _vm.i18n.t(\"profile.mobile\")\n      : null\n  var g4 =\n    _vm.forums.qcloud && _vm.forums.qcloud.qcloud_sms && !_vm.profile.mobile\n      ? _vm.i18n.t(\"profile.bindingmobile\")\n      : null\n  var g5 = _vm.i18n.t(\"profile.password\")\n  var g6 = _vm.profile.hasPassword ? _vm.i18n.t(\"profile.modify\") : null\n  var g7 = !_vm.profile.hasPassword ? _vm.i18n.t(\"profile.setpassword\") : null\n  var g8 =\n    _vm.forums.passport && _vm.forums.passport.miniprogram_close\n      ? _vm.i18n.t(\"profile.wechat\")\n      : null\n  var g9 =\n    _vm.profile.realname && _vm.forums.qcloud && _vm.forums.qcloud.qcloud_faceid\n      ? _vm.i18n.t(\"profile.certification\")\n      : null\n  var g10 =\n    !_vm.profile.realname &&\n    _vm.forums.qcloud &&\n    _vm.forums.qcloud.qcloud_faceid\n      ? _vm.i18n.t(\"profile.certification\")\n      : null\n  var g11 =\n    !_vm.profile.realname &&\n    _vm.forums.qcloud &&\n    _vm.forums.qcloud.qcloud_faceid\n      ? _vm.i18n.t(\"profile.tocertification\")\n      : null\n  var g12 = _vm.i18n.t(\"profile.signature\")\n  var g13 = _vm.i18n.t(\"profile.modify\")\n  var g14 = _vm.i18n.t(\"user.noBindTips\")\n  var g15 = _vm.i18n.t(\"user.changeBindTips\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n        g4: g4,\n        g5: g5,\n        g6: g6,\n        g7: g7,\n        g8: g8,\n        g9: g9,\n        g10: g10,\n        g11: g11,\n        g12: g12,\n        g13: g13,\n        g14: g14,\n        g15: g15\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./profile.vue?vue&type=script&lang=js&\"","<template>\n  <qui-page :data-qui-theme=\"theme\" class=\"profile\">\n    <view class=\"my-profile\">\n      <!-- canEditUsername 是否允许修改用户名-->\n      <navigator\n        :url=\"`/pages/modify/editusername?id=${userId}`\"\n        hover-class=\"none\"\n        v-if=\"profile.canEditUsername\"\n      >\n        <qui-cell-item\n          :title=\"i18n.t('profile.username')\"\n          arrow\n          :addon=\"profile.username\"\n        ></qui-cell-item>\n      </navigator>\n      <qui-cell-item\n        :title=\"i18n.t('profile.username')\"\n        arrow\n        class=\"no-arrow\"\n        v-if=\"!profile.canEditUsername\"\n        :addon=\"profile.username\"\n      ></qui-cell-item>\n      <qui-cell-item :title=\"i18n.t('profile.avatar')\" slot-right arrow @tap=\"changeAvatar\">\n        <qui-avatar class=\"my-profile__avatar\" :user=\"profile\" :is-real=\"profile.isReal\" />\n      </qui-cell-item>\n      <!-- qcloud_sms 是否开启短信服务  没有绑定手机号码，跳到“设置新手机”页,反之跳到修改手机号页面，-->\n      <qui-cell-item\n        :title=\"i18n.t('profile.mobile')\"\n        arrow\n        :addon=\"profile.mobile ? profile.mobile : i18n.t('profile.bindingmobile')\"\n        v-if=\"forums.qcloud && forums.qcloud.qcloud_sms\"\n        @click=\"bindPhone\"\n      ></qui-cell-item>\n      <!--没有密码，跳到“设置密码”页,反之跳到密码是修改页面，-->\n      <navigator\n        :url=\"\n          profile.hasPassword\n            ? `/pages/modify/editpwd?id=${userId}`\n            : `/pages/modify/newpwd?id=${userId}`\n        \"\n        hover-class=\"none\"\n      >\n        <qui-cell-item\n          :title=\"i18n.t('profile.password')\"\n          arrow\n          :addon=\"profile.hasPassword ? i18n.t('profile.modify') : i18n.t('profile.setpassword')\"\n        ></qui-cell-item>\n      </navigator>\n      <!-- #ifdef MP-WEIXIN -->\n      <qui-cell-item\n        v-if=\"forums.passport && forums.passport.miniprogram_close\"\n        :title=\"i18n.t('profile.wechat')\"\n        :addon=\"name\"\n        arrow\n        @click=\"bindWechat\"\n      ></qui-cell-item>\n      <!-- #endif -->\n      <!-- #ifdef H5-->\n      <qui-cell-item\n        v-if=\"forums.passport && forums.passport.offiaccount_close\"\n        :title=\"i18n.t('profile.wechat')\"\n        :addon=\"name\"\n        arrow\n        @click=\"bindWechat\"\n      ></qui-cell-item>\n      <!-- #endif -->\n      <!-- qcloud_faceid 是否开启实名认证 -->\n      <qui-cell-item\n        v-if=\"profile.realname && forums.qcloud && forums.qcloud.qcloud_faceid\"\n        :title=\"i18n.t('profile.certification')\"\n        :addon=\"profile.realname\"\n        arrow\n        class=\"no-arrow\"\n      ></qui-cell-item>\n      <navigator\n        :url=\"`/pages/modify/realname?id=${userId}`\"\n        hover-class=\"none\"\n        v-if=\"!profile.realname && forums.qcloud && forums.qcloud.qcloud_faceid\"\n      >\n        <qui-cell-item\n          :title=\"i18n.t('profile.certification')\"\n          arrow\n          :addon=\"i18n.t('profile.tocertification')\"\n        ></qui-cell-item>\n      </navigator>\n      <navigator :url=\"`/pages/modify/signature?id=${userId}`\" hover-class=\"none\">\n        <qui-cell-item\n          :title=\"i18n.t('profile.signature')\"\n          arrow\n          :addon=\"i18n.t('profile.modify')\"\n          :border=\"false\"\n        ></qui-cell-item>\n      </navigator>\n      <qui-uploader\n        :url=\"`${host}api/users/${userId}/avatar`\"\n        :header=\"header\"\n        :form-data=\"formData\"\n        async-clear\n        count=\"1\"\n        ref=\"upload\"\n        name=\"avatar\"\n        @uploadSuccess=\"uploadSuccess\"\n        @uploadFail=\"uploadFail\"\n        @chooseSuccess=\"chooseSuccess\"\n      ></qui-uploader>\n      <qui-toast ref=\"toast\"></qui-toast>\n    </view>\n    <!-- #ifdef MP-WEIXIN -->\n    <uni-popup ref=\"authPhone\" type=\"bottom\">\n      <qui-auth-phone @closeDialog=\"closeDialog\"></qui-auth-phone>\n    </uni-popup>\n    <!-- #endif -->\n    <!-- 解绑 -->\n    <uni-popup ref=\"noBind\" type=\"center\">\n      <uni-popup-dialog\n        type=\"warn\"\n        :content=\"i18n.t('user.noBindTips')\"\n        :before-close=\"true\"\n        @close=\"closeNoBind\"\n        @confirm=\"clickNoBind\"\n      ></uni-popup-dialog>\n    </uni-popup>\n    <!-- 换绑 -->\n    <uni-popup ref=\"changeBind\" type=\"center\">\n      <uni-popup-dialog\n        type=\"warn\"\n        :content=\"i18n.t('user.changeBindTips')\"\n        :before-close=\"true\"\n        @close=\"closeChangeBind\"\n        @confirm=\"clickChangeBind\"\n      ></uni-popup-dialog>\n    </uni-popup>\n  </qui-page>\n</template>\n\n<script>\nimport { DISCUZ_REQUEST_HOST } from '@/common/const';\nimport forums from '@/mixin/forums';\nimport loginModule from '@/mixin/loginModule';\nimport uniPopupDialog from '@/components/uni-popup/uni-popup-dialog';\nimport { getCurUrl } from '@/utils/getCurUrl';\n// #ifdef H5\nimport appCommonH from '@/utils/commonHelper';\n// #endif\n\nexport default {\n  components: { uniPopupDialog },\n  mixins: [\n    forums,\n    loginModule,\n    // #ifdef H5\n    appCommonH,\n    // #endif\n  ],\n  data() {\n    return {\n      hasPassword: false,\n      header: {},\n      formData: {},\n      profile: {},\n      name: '',\n      show: false,\n      host: DISCUZ_REQUEST_HOST,\n      userId: this.$store.getters['session/get']('userId'), // 获取当前登陆用户的ID\n      // #ifdef H5\n      isWeixin: false, // 默认不是微信浏览器\n      // #endif\n    };\n  },\n  // 解决左上角返回数据不刷新情况\n  onShow() {\n    this.getUserInfo();\n  },\n  onLoad() {\n    const token = uni.getStorageSync('access_token');\n    this.header = {\n      authorization: `Bearer ${token}`,\n    };\n    this.formData = {\n      type: 1,\n    };\n    // #ifdef H5\n    const { isWeixin } = appCommonH.isWeixin();\n    this.isWeixin = isWeixin;\n    // #endif\n  },\n  methods: {\n    bindPhone() {\n      // #ifdef MP-WEIXIN\n      if (this.profile && this.profile.mobile === '') {\n        this.$refs.authPhone.open();\n      } else {\n        uni.navigateTo({\n          url: `/pages/modify/mobile?id=${this.userId}`,\n        });\n      }\n      // #endif\n      // #ifdef H5\n      if (this.profile && this.profile.mobile !== '') {\n        uni.navigateTo({\n          url: `/pages/modify/mobile?id=${this.userId}`,\n        });\n      } else {\n        uni.navigateTo({\n          url: `/pages/modify/setphon?id=${this.userId}`,\n        });\n      }\n      // #endif\n    },\n    bindWechat() {\n      // 绑定\n      if (this.name === '绑定') {\n        uni.setStorage({\n          key: 'page',\n          data: getCurUrl(),\n        });\n        // #ifdef MP-WEIXIN\n        uni.setStorageSync('isSend', true);\n        uni.setStorageSync('isBind', true);\n        this.$store.getters['session/get']('auth').open();\n        // #endif\n        // #ifdef H5\n        if (this.isWeixin) {\n          this.wxh5Login(0, 0);\n        } else {\n          uni.showToast({\n            icon: 'none',\n            title: this.i18n.t('profile.wechatTip'),\n            duration: 2000,\n          });\n        }\n        // #endif\n        return;\n      }\n      // 解绑\n      if (this.name !== '绑定' && this.name.indexOf('解绑') > -1) {\n        this.$refs.noBind.open();\n      }\n      // 换绑\n      if (\n        this.name !== '绑定' &&\n        this.name.indexOf('换绑') > -1 &&\n        this.forums &&\n        this.forums.set_reg &&\n        this.forums.set_reg.register_type === 2\n      ) {\n        uni.setStorage({\n          key: 'page',\n          data: getCurUrl(),\n        });\n        uni.setStorageSync('isSend', false);\n        uni.setStorageSync('isBind', false);\n        this.$refs.changeBind.open();\n      }\n    },\n    clickNoBind() {\n      this.$store.dispatch('jv/delete', `users/${this.userId}/wechat`).then(res => {\n        if (res && res._jv && res._jv.id) {\n          this.getUserInfo();\n          this.closeNoBind();\n          uni.showToast({\n            title: '解绑成功',\n            duration: 2000,\n          });\n        }\n      });\n    },\n    closeNoBind() {\n      this.$refs.noBind.close();\n    },\n    clickChangeBind() {\n      // #ifdef MP-WEIXIN\n      this.jump2LoginBindPage();\n      // #endif\n      // #ifdef H5\n      this.wxh5Login(0, 1);\n      // #endif\n    },\n    closeChangeBind() {\n      this.$refs.changeBind.close();\n    },\n    getUserInfo() {\n      const params = {\n        include: 'groups,wechat',\n      };\n      this.$store.dispatch('jv/get', [`users/${this.userId}`, { params }]).then(res => {\n        if (res && res._jv && res._jv.id) {\n          this.profile = res;\n          // 公众号mp_openid   小程序min_openid\n          // #ifdef MP-WEIXIN\n          if (res && res.wechat && res.wechat.min_openid !== '') {\n            if (this.forums && this.forums.set_reg && this.forums.set_reg.register_type === 2) {\n              this.name = `${res.wechat.nickname} (换绑)`;\n            } else {\n              this.name = `${res.wechat.nickname} (解绑)`;\n            }\n          } else {\n            this.name = '绑定';\n          }\n          // #endif\n          // #ifdef H5\n          if (res && res.wechat && res.wechat.mp_openid !== '') {\n            if (this.forums && this.forums.set_reg && this.forums.set_reg.register_type === 2) {\n              if (this.isWeixin) {\n                this.name = `${res.wechat.nickname} (换绑)`;\n              } else {\n                // 微信外-无感模式只展示微信号\n                this.name = `${res.wechat.nickname}`;\n              }\n            } else {\n              this.name = `${res.wechat.nickname} (解绑)`;\n            }\n          } else {\n            this.name = '绑定';\n          }\n          // #endif\n          const userInfo = {\n            headimgurl: res.avatarUrl,\n            username: res.username,\n          };\n          uni.setStorageSync('userInfo', userInfo);\n        }\n      });\n    },\n    uploadSuccess(res) {\n      uni.hideLoading();\n      if (res.statusCode >= 200 && res.statusCode < 300) {\n        this.$refs.toast.show({ message: this.i18n.t('profile.successfullyuploadedtheavatar') });\n        const newAvatar = JSON.parse(res.data).data.attributes.avatarUrl;\n        this.profile.avatarUrl = newAvatar;\n      } else {\n        const { code } = JSON.parse(res.data).errors[0];\n        if (code === 'upload_time_not_up') {\n          this.$refs.toast.show({ message: this.i18n.t('profile.uploadtimenotup') });\n        } else if (code === 'validation_error') {\n          this.$refs.toast.show({ message: this.i18n.t('profile.validationerror') });\n        } else {\n          this.$refs.toast.show({ message: code });\n        }\n      }\n    },\n    changeAvatar() {\n      this.$refs.upload.uploadClick();\n    },\n    chooseSuccess() {\n      uni.showLoading();\n    },\n    // #ifdef MP-WEIXIN\n    closeDialog() {\n      this.$refs.authPhone.close();\n    },\n    // #endif\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/styles/base/variable/global.scss';\n@import '@/styles/base/theme/fn.scss';\n.profile /deep/ {\n  overflow: hidden;\n  .my-profile {\n    position: relative;\n    padding-top: 20rpx;\n    padding-left: 40rpx;\n    background: --color(--qui-BG-2);\n    border-bottom: 2rpx solid --color(--qui-BOR-ED);\n    box-sizing: border-box;\n  }\n  .cell-item {\n    padding-right: 40rpx;\n  }\n  .cell-item__body__content-title {\n    color: --color(--qui-FC-777);\n  }\n  .cell-item__body__right {\n    color: --color(--qui-FC-333);\n  }\n  .qui-uploader-box {\n    display: none;\n  }\n  .no-arrow .arrow {\n    visibility: hidden;\n  }\n}\n\n.my-profile__avatar {\n  position: absolute;\n  top: 13rpx;\n  right: 44rpx;\n  width: 75rpx;\n  height: 75rpx;\n}\n</style>\n","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./profile.vue?vue&type=style&index=0&id=1b5be302&lang=scss&scoped=true&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./profile.vue?vue&type=style&index=0&id=1b5be302&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1636533851560\n      var cssReload = require(\"G:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}