{"version":3,"sources":["uni-app:///main.js","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/my/shield.vue?d84a","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/my/shield.vue?90d5","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/my/shield.vue?8ce6","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/my/shield.vue?1089","uni-app:///pages/my/shield.vue","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/my/shield.vue?3e57","webpack:///E:/wamp/www/hi-hupai-wechat-pro/pages/my/shield.vue?0ed1"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F;AACAA,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACsC;;;AAG3F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,8OAEN;AACP,KAAK;AACL;AACA,aAAa,wLAEN;AACP,KAAK;AACL;AACA,aAAa,0PAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,aAAa,0MAEN;AACP,KAAK;AACL;AACA,aAAa,8LAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClHA;AAAA;AAAA;AAAA;AAAgmB,CAAgB,0nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuJpnB;AACA,gDADA;AAEA,MAFA,kBAEA;AACA;AACA,2BADA;AAEA,qBAFA,EAEA;AACA,sBAHA;AAIA,kBAJA,EAIA;AACA,iBALA,EAKA;AACA,mBANA,EAMA;AACA,YAPA,EAOA;AACA,sBARA;AASA,oBATA,EASA;AACA,iBAVA,EAUA;AACA,mBAXA,EAWA;AACA,uBAZA,EAYA;AACA,wBAbA,EAaA;AACA,wBAdA,EAcA;AACA,oBAfA,EAeA;AACA,oBAhBA;;AAkBA,GArBA;AAsBA,QAtBA,oBAsBA;AACA;AACA;AACA,GAzBA;AA0BA;AACA,UADA,oBACA;AACA;AACA,KAHA,EA1BA;;AA+BA;AACA;AACA,cAFA,wBAEA;AACA;AACA;AACA,KALA;AAMA;AACA,cAPA,wBAOA;AACA;AACA,KATA;AAUA;AACA,eAXA,uBAWA,CAXA,EAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA,EAIA,GAJA;AAKA,KApBA;AAqBA;AACA,gBAtBA,0BAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA/BA;AAgCA;AACA,iBAjCA,2BAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA,OATA;AAUA,KA5CA;AA6CA;AACA,iBA9CA,2BA8CA;AACA;AACA;AACA,qCADA;AAEA,qCAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAPA;AAQA,KA5DA;AA6DA;AACA,eA9DA,uBA8DA,GA9DA,EA8DA,IA9DA,EA8DA;AACA;AACA;AACA,yBADA;AAEA,yBAFA;AAGA,qCAHA;AAIA,qCAJA;AAKA,gDALA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA;AAGA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OAfA;AAgBA,KAvFA;AAwFA;AACA,kBAzFA,4BAyFA;AACA;AACA;AACA,KA5FA;AA6FA;AACA,iBA9FA,2BA8FA;AACA;AACA;AACA;AACA;AACA;AACA,KApGA;AAqGA;AACA,cAtGA,sBAsGA,GAtGA,EAsGA,IAtGA,EAsGA;AACA;AACA;AACA;AACA,KA1GA;AA2GA,gBA3GA,wBA2GA,IA3GA,EA2GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KApHA;AAqHA,gBArHA,0BAqHA;AACA;AACA,KAvHA;AAwHA,YAxHA,sBAwHA;AACA;AACA;AACA;AACA,kDADA,EADA;;;AAKA;AACA;AACA;AACA,wFADA;AAEA,WAFA;;AAIA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAfA;AAgBA,KA/IA;AAgJA;AACA,kBAjJA,0BAiJA,GAjJA,EAiJA;AACA;AACA;AACA;AACA,sBADA;AAEA,wDAFA;;AAIA;AACA,OAPA;AAQA,KA1JA;AA2JA;AACA,gBA5JA,wBA4JA,GA5JA,EA4JA;AACA;AACA;AACA;AACA,KAhKA,EA/BA,E;;;;;;;;;;;;;ACvJA;AAAA;AAAA;AAAA;AAA0nC,CAAgB,omCAAG,EAAC,C;;;;;;;;;;;ACA9oC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/my/shield.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/my/shield.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./shield.vue?vue&type=template&id=511f5703&scoped=true&\"\nvar renderjs\nimport script from \"./shield.vue?vue&type=script&lang=js&\"\nexport * from \"./shield.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shield.vue?vue&type=style&index=0&id=511f5703&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"511f5703\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/my/shield.vue\"\nexport default component.exports","export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shield.vue?vue&type=template&id=511f5703&scoped=true&\"","var components\ntry {\n  components = {\n    quiPage: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-page/qui-page\" */ \"@/components/qui-page/qui-page.vue\"\n      )\n    },\n    quiIcon: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-icon/qui-icon\" */ \"@/components/qui-icon/qui-icon.vue\"\n      )\n    },\n    quiAvatar: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-avatar/qui-avatar\" */ \"@/components/qui-avatar/qui-avatar.vue\"\n      )\n    },\n    quiCellItem: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-cell-item/qui-cell-item\" */ \"@/components/qui-cell-item/qui-cell-item.vue\"\n      )\n    },\n    quiLoadMore: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-load-more/qui-load-more\" */ \"@/components/qui-load-more/qui-load-more.vue\"\n      )\n    },\n    quiNoData: function() {\n      return import(\n        /* webpackChunkName: \"components/qui-no-data/qui-no-data\" */ \"@/components/qui-no-data/qui-no-data.vue\"\n      )\n    },\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.i18n.t(\"profile.addshielduser\")\n  var g1 = _vm.i18n.t(\"search.searchusers\")\n  var g2 = _vm.searchValue ? _vm.i18n.t(\"search.cancel\") : null\n  var l0 =\n    !_vm.searchValue && _vm.shieldTotal\n      ? _vm.__map(_vm.shieldList, function(item, index) {\n          var $orig = _vm.__get_orig(item)\n\n          var m0 = _vm.unbundlingID(item.id)\n          var g3 = m0 ? _vm.i18n.t(\"profile.shield\") : null\n          var g4 = !m0 ? _vm.i18n.t(\"profile.unbundling\") : null\n          return {\n            $orig: $orig,\n            m0: m0,\n            g3: g3,\n            g4: g4\n          }\n        })\n      : null\n  var g5 =\n    !_vm.searchValue && _vm.shieldTotal == 0\n      ? _vm.i18n.t(\"profile.noshield\")\n      : null\n  var g6 = _vm.i18n.t(\"profile.shield\")\n  var l1 = _vm.searchValue\n    ? _vm.__map(_vm.userList, function(item, index) {\n        var $orig = _vm.__get_orig(item)\n\n        var m1 = _vm.handleGroups(item)\n        return {\n          $orig: $orig,\n          m1: m1\n        }\n      })\n    : null\n  var g7 = _vm.i18n.t(\"profile.shieldusersure\")\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        l0: l0,\n        g5: g5,\n        g6: g6,\n        l1: l1,\n        g7: g7\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shield.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shield.vue?vue&type=script&lang=js&\"","<template>\n  <qui-page :data-qui-theme=\"theme\" class=\"shield\">\n    <!-- 用户搜索 -->\n    <view class=\"search\">\n      <view class=\"search-addUser\" @tap=\"showSearch\" v-show=\"showSearchInput\">\n        <view class=\"search-addUser__inner\">\n          <qui-icon\n            name=\"icon-add\"\n            size=\"30\"\n            color=\"#b5b5b5\"\n            style=\"margin-right: 15rpx;\"\n          ></qui-icon>\n          <text>{{ i18n.t('profile.addshielduser') }}</text>\n        </view>\n      </view>\n      <view class=\"search-box\">\n        <view class=\"search-box__content\">\n          <view class=\"icon-content-search\">\n            <qui-icon name=\"icon-search\" size=\"30\" color=\"#bbb\"></qui-icon>\n          </view>\n          <input\n            ref=\"inputValue\"\n            type=\"text\"\n            class=\"search-box__content-input\"\n            placeholder-class=\"input-placeholder\"\n            :placeholder=\"i18n.t('search.searchusers')\"\n            :value=\"searchValue\"\n            :focus=\"isFocus\"\n            @input=\"searchInput\"\n            @blur=\"searchBlur\"\n          />\n          <view @tap=\"cancelSearch\" v-if=\"searchValue\" class=\"search-box__content-delete\">\n            <qui-icon name=\"icon-close1\" size=\"32\" color=\"#ccc\"></qui-icon>\n          </view>\n        </view>\n        <view class=\"search-box__cancel\" v-if=\"searchValue\" @tap=\"cancelSearch\">\n          <text>{{ i18n.t('search.cancel') }}</text>\n        </view>\n      </view>\n    </view>\n    <!-- 用户屏蔽列表 -->\n    <view class=\"shield-item\" v-if=\"!searchValue\">\n      <scroll-view\n        scroll-y=\"true\"\n        scroll-with-animation=\"true\"\n        @scrolltolower=\"shieldpullDown\"\n        show-scrollbar=\"false\"\n        class=\"scroll-y\"\n        v-if=\"shieldTotal\"\n      >\n        <view class=\"shield-item__users\" v-for=\"(item, index) in shieldList\" :key=\"index\">\n          <qui-avatar\n            class=\"shield-item__users__avatar\"\n            size=\"70\"\n            :user=\"item\"\n            :is-real=\"item.isReal\"\n          ></qui-avatar>\n          <qui-cell-item class=\"shield-item__users__content\" :title=\"item.username\" slot-right>\n            <view\n              class=\"shield-item__users__operation\"\n              plain\n              @tap=\"shieldUser(item.id, 'sheild')\"\n              v-if=\"unbundlingID(item.id)\"\n            >\n              <text>{{ i18n.t('profile.shield') }}</text>\n              <qui-icon\n                name=\"icon-shieldUser\"\n                class=\"shield-item__users__icon\"\n                size=\"36\"\n                color=\"#FC8888\"\n              ></qui-icon>\n            </view>\n            <view class=\"shield-item__users__operation\" plain @tap=\"unbundlingUser(item.id)\" v-else>\n              <text>{{ i18n.t('profile.unbundling') }}</text>\n              <qui-icon\n                name=\"icon-deleteUser\"\n                class=\"shield-item__users__icon\"\n                size=\"36\"\n                color=\"#777777\"\n              ></qui-icon>\n            </view>\n          </qui-cell-item>\n        </view>\n        <qui-load-more\n          :status=\"sloadingType\"\n          :show-icon=\"false\"\n          v-if=\"sloadingType\"\n        ></qui-load-more>\n      </scroll-view>\n      <qui-no-data\n        class=\"no-data\"\n        :tips=\"i18n.t('profile.noshield')\"\n        v-if=\"shieldTotal == 0\"\n      ></qui-no-data>\n    </view>\n    <!-- 用户搜索列表 -->\n    <view class=\"shield-item\" v-if=\"searchValue\">\n      <scroll-view\n        scroll-y=\"true\"\n        scroll-with-animation=\"true\"\n        @scrolltolower=\"pullDownUsers\"\n        show-scrollbar=\"false\"\n        class=\"scroll-y\"\n      >\n        <view class=\"shield-item__users\" v-for=\"(item, index) in userList\" :key=\"index\">\n          <qui-avatar\n            class=\"shield-item__users__avatar\"\n            size=\"70\"\n            :user=\"item\"\n            :is-real=\"item.isReal\"\n          ></qui-avatar>\n          <qui-cell-item\n            class=\"shield-item__users__content\"\n            :title=\"item.username\"\n            :brief=\"handleGroups(item)\"\n            slot-right\n          >\n            <view class=\"shield-item__users__operation\" plain @tap=\"shieldUser(item.id, 'user')\">\n              <text>{{ i18n.t('profile.shield') }}</text>\n              <qui-icon\n                name=\"icon-shieldUser\"\n                class=\"shield-item__users__icon\"\n                size=\"36\"\n                color=\"#FC8888\"\n              ></qui-icon>\n            </view>\n          </qui-cell-item>\n        </view>\n        <qui-load-more\n          :status=\"uloadingType\"\n          :show-icon=\"false\"\n          v-if=\"uloadingType\"\n        ></qui-load-more>\n      </scroll-view>\n    </view>\n    <!-- 屏蔽用户提示 -->\n    <uni-popup ref=\"popShield\" type=\"center\">\n      <uni-popup-dialog\n        type=\"warning\"\n        :before-close=\"true\"\n        :content=\"i18n.t('profile.shieldusersure')\"\n        @close=\"handleCancel\"\n        @confirm=\"handleOk\"\n      ></uni-popup-dialog>\n    </uni-popup>\n  </qui-page>\n</template>\n\n<script>\nimport uniPopupDialog from '@/components/uni-popup/uni-popup-dialog';\n\nexport default {\n  components: { uniPopupDialog },\n  data() {\n    return {\n      showSearchInput: true,\n      searchValue: '', // 输入的用户名\n      uloadingType: '',\n      userList: [], // 用户数据\n      uPageNum: 1, // 用户当前页数\n      uPageSize: 15, // 用户每页显示条数\n      uid: 0, // 用户id\n      sloadingType: '',\n      shieldList: [], // 屏蔽数据\n      sPageNum: 1, // 屏蔽当前页数\n      sPageSize: 10, // 屏蔽每页显示条数\n      shieldTotal: null, // 屏蔽总条数\n      unbundlingArry: [], // 解绑用户组\n      unbundUserData: [], // 已屏蔽用户组\n      shieldType: '', // 屏蔽类型 user 用户列表 sheild 黑名单\n      isFocus: false,\n    };\n  },\n  onLoad() {\n    this.getShieldList();\n    this.getShieldData();\n  },\n  computed: {\n    userId() {\n      return this.$store.getters['session/get']('userId');\n    },\n  },\n  methods: {\n    // 显示搜索框\n    showSearch() {\n      this.showSearchInput = false;\n      this.isFocus = true;\n    },\n    // 输入框失去焦点\n    searchBlur() {\n      this.isFocus = false;\n    },\n    // 搜索框输入\n    searchInput(e) {\n      this.searchValue = e.target.value;\n      this.unbundlingArry = [];\n      if (this.uTimeOut) clearTimeout(this.uTimeOut);\n      this.uTimeOut = setTimeout(() => {\n        this.userList = [];\n        this.uPageNum = 1;\n        this.getUserList(e.target.value);\n      }, 250);\n    },\n    // 取消搜索用户\n    cancelSearch() {\n      this.searchValue = '';\n      this.uPageNum = 1;\n      this.getUserList('', 'clear');\n      this.sPageNum = 1;\n      this.shieldList = [];\n      this.getShieldList();\n      this.isFocus = false;\n      this.showSearchInput = true;\n    },\n    // 获取黑名单数据\n    getShieldData() {\n      this.$store.dispatch('jv/get', `users/${this.userId}/deny`).then(res => {\n        if (res._jv) {\n          delete res._jv;\n        }\n        this.unbundUserData = [];\n        this.unbundUserData.push(Number(this.userId));\n        res.forEach((v, i) => {\n          this.unbundUserData.push(res[i].id);\n        });\n      });\n    },\n    // 获取黑名单列表\n    getShieldList() {\n      this.sloadingType = 'loading';\n      const params = {\n        'page[limit]': this.sPageSize,\n        'page[number]': this.sPageNum,\n      };\n      this.$store.dispatch('jv/get', [`users/${this.userId}/deny`, { params }]).then(res => {\n        if (res._jv) {\n          delete res._jv;\n        }\n        this.shieldList = [...this.shieldList, ...res];\n        this.shieldTotal = this.shieldList.length;\n        this.sloadingType = res.length === this.sPageSize ? 'more' : 'nomore';\n      });\n    },\n    // 搜索用户列表\n    getUserList(key, type) {\n      this.loadingType = 'loading';\n      const params = {\n        include: 'groups',\n        sort: 'createdAt',\n        'page[number]': this.uPageNum,\n        'page[limit]': this.uPageSize,\n        'filter[username]': `*${key}*`,\n      };\n      this.$store.dispatch('jv/get', ['users', { params }]).then(res => {\n        if (res._jv) {\n          delete res._jv;\n        }\n        res.forEach((v, i) => {\n          res[i].groupName = v.groups[0] ? v.groups[0].name : '';\n        });\n        this.uloadingType = res.length === this.uPageSize ? 'more' : 'nomore';\n        // 过滤搜索用户中已屏蔽的用户和当前登录用户\n        const data = res.filter(item => this.unbundUserData.indexOf(item.id) === -1);\n        if (type && type === 'clear') {\n          this.userList = data;\n        } else {\n          this.userList = [...this.userList, ...data];\n        }\n      });\n    },\n    // 黑名单下拉刷新\n    shieldpullDown() {\n      this.sPageNum += 1;\n      this.getShieldList();\n    },\n    // 用户列表下拉刷新\n    pullDownUsers() {\n      if (this.uloadingType !== 'more') {\n        return;\n      }\n      this.uPageNum += 1;\n      this.getUserList(this.searchValue);\n    },\n    // 屏蔽用户\n    shieldUser(uid, type) {\n      this.uid = uid;\n      this.shieldType = type;\n      this.$refs.popShield.open();\n    },\n    handleGroups(data) {\n      let groups = [];\n      if (data.groups && data.groups.length > 0) {\n        groups = data.groups.filter(item => item.isDisplay);\n      }\n      if (groups.length > 0) {\n        return groups[0].name;\n      }\n      return '';\n    },\n    handleCancel() {\n      this.$refs.popShield.close();\n    },\n    handleOk() {\n      this.$refs.popShield.close();\n      const params = {\n        _jv: {\n          type: `users/${this.uid}/deny`,\n        },\n      };\n      this.$store.dispatch('jv/post', params).then(() => {\n        if (this.unbundlingID(this.uid)) {\n          this.unbundlingArry.splice(\n            this.unbundlingArry.findIndex(item => item === this.uid),\n            1,\n          );\n        }\n        if (this.shieldType && this.shieldType === 'user') {\n          this.cancelSearch();\n        } else {\n          this.searchValue = '';\n          this.uPageNum = 1;\n          this.getUserList('', 'clear');\n        }\n        this.getShieldData();\n      });\n    },\n    // 解绑用户\n    unbundlingUser(uid) {\n      this.$store.dispatch('jv/delete', `users/${uid}/deny`).then(() => {\n        this.unbundlingArry.push(uid);\n        uni.showToast({\n          icon: 'none',\n          title: this.i18n.t('profile.unboundsucceed'),\n        });\n        this.getShieldData();\n      });\n    },\n    // 判断是否已解绑某个用户\n    unbundlingID(uid) {\n      if (this.unbundlingArry && this.unbundlingArry.includes(uid)) {\n        return true;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/styles/base/variable/global.scss';\n@import '@/styles/base/theme/fn.scss';\n\n$backgroundColor: --color(--qui-BG-2);\n\n/* #ifdef H5 */\n$height: calc(100vh - 200rpx);\n/* #endif */\n\n/* #ifdef MP-WEIXIN */\n$height: calc(100vh - 110rpx);\n/* #endif */\n// 搜索\n.search {\n  position: relative;\n\n  .search-addUser {\n    position: absolute;\n    z-index: 100;\n    width: 100%;\n    padding: 15px 20px 10px;\n    background-color: $backgroundColor;\n    box-sizing: border-box;\n\n    &__inner {\n      display: flex;\n      height: 80rpx;\n      font-size: $fg-f4;\n      line-height: 80rpx;\n      color: --color(--qui-FC-7D7979);\n      background: --color(--qui-BG-IT);\n      border: none;\n      border-radius: 7rpx;\n      justify-content: center;\n    }\n  }\n\n  .search-box {\n    background-color: $backgroundColor;\n  }\n}\n// 屏蔽列表\n.shield-item {\n  background-color: $backgroundColor;\n  border-bottom: 2rpx solid --color(--qui-BOR-ED);\n\n  /deep/ .no-data {\n    padding-top: 40rpx;\n  }\n\n  &__users {\n    position: relative;\n    padding: 0rpx 20rpx 0rpx 130rpx;\n\n    &__avatar {\n      position: absolute;\n      top: 30rpx;\n      left: 40rpx;\n    }\n\n    &__content {\n      display: block;\n      padding: 15rpx 0rpx;\n    }\n\n    &__operation {\n      display: flex;\n      align-items: center;\n      margin-right: 30rpx;\n      font-size: $fg-f4;\n      color: --color(--qui-FC-777);\n    }\n\n    &__icon {\n      margin-left: 15rpx;\n    }\n  }\n}\n/deep/ .cell-item__body__content-brief {\n  color: --color(--qui-FC-DDD);\n}\n.scroll-y {\n  max-height: $height;\n}\n</style>\n","import mod from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shield.vue?vue&type=style&index=0&id=511f5703&lang=scss&scoped=true&\"; export default mod; export * from \"-!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shield.vue?vue&type=style&index=0&id=511f5703&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1636533854726\n      var cssReload = require(\"G:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}