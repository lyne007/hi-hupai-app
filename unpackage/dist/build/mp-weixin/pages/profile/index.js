(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/profile/index"],{"2c5e":function(e,t,n){"use strict";var o=n("3fed"),r=n.n(o);r.a},"3fed":function(e,t,n){},"51f2":function(e,t,n){"use strict";n.r(t);var o=n("a941"),r=n("9aa2");for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("2c5e");var s,u=n("f0c5"),l=Object(u["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=l.exports},9575:function(e,t,n){"use strict";(function(e){n("3768");o(n("66fd"));var t=o(n("51f2"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"9aa2":function(e,t,n){"use strict";n.r(t);var o=n("bfc2"),r=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},a941:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={quiPage:function(){return Promise.all([n.e("common/vendor"),n.e("components/qui-page/qui-page")]).then(n.bind(null,"2bf0"))},quiAvatar:function(){return Promise.all([n.e("common/vendor"),n.e("components/qui-avatar/qui-avatar")]).then(n.bind(null,"ce3f"))},quiCellItem:function(){return n.e("components/qui-cell-item/qui-cell-item").then(n.bind(null,"bd3e"))},quiIcon:function(){return n.e("components/qui-icon/qui-icon").then(n.bind(null,"5d1d"))},quiTabs:function(){return n.e("components/qui-tabs/qui-tabs").then(n.bind(null,"18b1"))},quiPageMessage:function(){return Promise.all([n.e("common/vendor"),n.e("components/qui-page-message/qui-page-message")]).then(n.bind(null,"f097"))}},r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.loaded&&e.userId!=e.currentLoginId&&e.can_create_dialog?e.i18n.t("profile.privateMessage"):null),o=e.loaded&&e.userId!=e.currentLoginId&&0==e.userInfo.follow?e.i18n.t("profile.following"):null,r=e.loaded&&e.userId!=e.currentLoginId&&0!=e.userInfo.follow&&1==e.userInfo.follow?e.i18n.t("profile.followed"):null,i=e.loaded&&e.userId!=e.currentLoginId&&0!=e.userInfo.follow&&1!=e.userInfo.follow?e.i18n.t("profile.mutualfollow"):null,s=e.loaded&&1===e.current&&e.forums.other&&e.forums.other.can_create_thread_question&&e.userInfo&&e.userInfo.canBeAsked?e.i18n.t("profile.askHim"):null;e._isMounted||(e.e0=function(t){0==e.userInfo.follow?e.addFollow(e.userInfo):e.deleteFollow(e.userInfo)}),e.$mp.data=Object.assign({},{$root:{g0:n,g1:o,g2:r,g3:i,g4:s}})},i=[]},bfc2:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("db65"),r=l(n("8605")),i=l(n("412c")),s=n("198a"),u=n("2f62");function l(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){n.e("pages/profile/topic").then(function(){return resolve(n("2a96"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("pages/profile/following").then(function(){return resolve(n("3118"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("pages/profile/followers").then(function(){return resolve(n("9f84"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("pages/profile/like").then(function(){return resolve(n("60ee"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("pages/profile/question").then(function(){return resolve(n("bc23"))}.bind(null,n)).catch(n.oe)},I={components:{topic:d,following:h,followers:g,like:p,question:m},mixins:[r.default,i.default],props:{type:{type:String,default:""}},data:function(){return{items:[{title:this.i18n.t("profile.topic"),brief:"0"},{title:this.i18n.t("profile.questionAndAnswer"),brief:"0"},{title:this.i18n.t("profile.following"),brief:"0"},{title:this.i18n.t("profile.followers"),brief:"0"},{title:this.i18n.t("profile.likes"),brief:"0"}],userId:0,currentLoginId:this.$store.getters["session/get"]("userId"),current:0,nowThreadId:"",userInfo:"",can_create_dialog:!1,dialogId:0,loaded:!0}},computed:c({themeColor:function(){return this.theme===this.$u.light()?"#333":"#fff"}},(0,u.mapState)({getCategoryId:function(e){return e.session.categoryId},getCategoryIndex:function(e){return e.session.categoryIndex},footerIndex:function(e){return e.footerTab.footerIndex?parseInt(e.footerTab.footerIndex,10):0}})),onLoad:function(e){var t=e.userId,n=e.current;this.userId=t||this.currentLoginId,this.current=parseInt(n,10)||0,this.getAuth(),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},onPullDownRefresh:function(){var e=["topic","question","following","followers","like"],t=this.current;this.$refs[e[t]]&&this.$refs[e[t]].pullDownRefresh()},onReachBottom:function(){var e=this.current,t=["topic","question","following","followers","like"];this.$refs[t[e]].pullDown()},onShow:function(){this.getUserInfo(this.userId),this.$refs.topic&&this.$refs.topic.uploadItem(),this.$refs.like&&this.$refs.like.uploadItem()},onShareAppMessage:function(e){if("button"===e.from){var t=this.$store.getters["jv/get"]("/threads/".concat(this.nowThreadId));return{title:1===t.type?t.title:t.firstPost.summaryText,path:"/topic/index?id=".concat(this.nowThreadId)}}},onShareTimeline:function(){return console.log("current=".concat(this.current,"&userId=").concat(this.userId),"9999999"),console.log(this.loaded,"loadedloadedloaded"),{title:this.forums.set_site.site_name,query:"current=".concat(this.current,"&userId=").concat(this.userId)}},methods:{onClickItem:function(e){e.currentIndex!==this.current&&(this.current=e.currentIndex)},getAuth:function(){var e=this,t={include:"users"};this.$store.dispatch("jv/get",["forum",{params:t}]).then((function(t){t.other&&t.other.can_create_dialog?e.can_create_dialog=!0:e.can_create_dialog=!1}))},getUserInfo:function(t){var n=this,o={include:["groups","dialog"]};this.$store.dispatch("jv/get",["users/".concat(t),{params:o}]).then((function(t){if(t.isDeleted)n.$store.dispatch("forum/setError",{code:"user_deleted",status:500}),n.loaded=!1;else{n.loaded=!0,n.dialogId=t.dialog?t.dialog._jv.id:0;var o=[];t.groups&&t.groups.length>0&&(o=t.groups.filter((function(e){return e.isDisplay}))),o.length>0?t.groupsName=o[0].name:t.groupsName="",n.setNum(t),n.userInfo=t,e.setNavigationBarTitle({title:"".concat(t.username).concat(n.i18n.t("profile.personalhomepage")," - ").concat(n.forums.set_site.site_name)})}})).catch((function(e){n.loaded=!1,404===e.statusCode&&n.$store.dispatch("forum/setError",{code:"user_deleted",status:500})}))},setNum:function(e){this.items[0].brief=e.threadCount||0,this.items[1].brief=e.questionCount||0,this.items[2].brief=e.followCount||0,this.items[3].brief=e.fansCount||0,this.items[4].brief=e.likedCount||0},addFollow:function(t){var n=this;this.$store.getters["session/get"]("isLogin")||(e.setStorage({key:"page",data:(0,s.getCurUrl)()}),this.mpLoginMode());var r={_jv:{type:"follow"},type:"user_follow",to_user_id:t.id};o.status.run((function(){return n.$store.dispatch("jv/post",r)})).then((function(){n.getUserInfo(n.userId),n.$refs.followers&&n.$refs.followers.getFollowerList("change")}))},deleteFollow:function(t){var n=this;this.$store.getters["session/get"]("isLogin")||(e.setStorage({key:"page",data:(0,s.getCurUrl)()}),this.mpLoginMode()),this.$store.dispatch("jv/delete","follow/".concat(t.id,"/1")).then((function(){n.getUserInfo(n.userId),n.$refs.followers&&n.$refs.followers.getFollowerList("change")}))},changeFollow:function(e){this.getUserInfo(e.userId)},handleClickShare:function(e){this.nowThreadId=e},handleAnswer:function(t){console.log(t,"userInfouserInfo"),e.navigateTo({url:"/topic/post?type=5&categoryId=".concat(this.getCategoryId,"&categoryIndex=").concat(this.getCategoryIndex)}),setTimeout((function(){t&&e.$emit("radioChange",t)}),1e3)},chat:function(){e.navigateTo({url:"/pages/notice/msglist?username=".concat(this.userInfo.username,"&dialogId=").concat(this.dialogId)})}},onUnload:function(){this.$store.dispatch("forum/setError",{loading:!1})}};t.default=I}).call(this,n("543d")["default"])}},[["9575","common/runtime","common/vendor"]]]);