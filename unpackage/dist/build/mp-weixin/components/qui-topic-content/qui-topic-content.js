(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/qui-topic-content/qui-topic-content"],{"2c60":function(t,e,i){"use strict";i.r(e);var n=i("cb09"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a},3652:function(t,e,i){},"5bd3":function(t,e,i){"use strict";var n=i("3652"),o=i.n(n);o.a},ab17:function(t,e,i){"use strict";i.r(e);var n=i("e9c0"),o=i("2c60");for(var a in o)"default"!==a&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("5bd3");var u,s=i("f0c5"),r=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"685346e8",null,!1,n["a"],u);e["default"]=r.exports},cb09:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=u(i("8605")),o=i("4317"),a=i("db65");function u(t){return t&&t.__esModule?t:{default:t}}var s={mixins:[n.default],props:{topicStatus:{type:Number,default:0},themeParts:{type:Number,default:0},followShow:{type:Boolean,default:!1},themeType:{type:Number,default:0},payStatus:{type:Boolean,default:!0},videoStatus:{type:Boolean,default:!0},threadPrice:{type:[Number,String],default:0},userInfo:{type:Object,default:function(){return{}}},userRole:{type:Array,default:function(){return[]}},userId:{type:[Number,String],default:""},avatarUrl:{type:String,default:""},userName:{type:String,default:""},isReal:{type:Boolean,default:!1},selectList:{type:Array,default:function(){return[]}},themeTitle:{type:String,default:""},threadIsEssence:{type:Boolean,default:!1},themeContent:{type:String,default:""},themeTime:{type:String,default:""},managementShow:{type:Boolean,default:!1},imagesList:{type:Array,default:function(){return[]}},postGoodsStatus:{type:Boolean,default:!1},postGoods:{type:Object,default:function(){return{}}},videoWidth:{type:Number,default:0},videoHeight:{type:Number,default:0},themid:{type:[Number,String],default:0},tags:{type:Array,default:function(){return[]}},beAskName:{type:String,default:""},coverImage:{type:String,default:""},duration:{type:String,default:""},mediaUrl:{type:String,default:""},fileList:{type:Array,default:function(){return[]}},threadPosition:{type:Array,default:function(){return[]}},threadAudio:{type:Object,default:function(){return{}}},attachmentPayStatus:{type:Boolean,default:!1}},data:function(){return{seleShow:!1,selectActive:!1,imageStatus:!0,videoShow:!1,attachMentList:[],autoplay:!1,look:!0,sun:1,blocKwidth:224,videoContext:"",wechatbrowser:!1,dataGoodInfoPrice:0}},computed:{t:function(){return this.i18n.t("topic")},p:function(){return this.i18n.t("pay")},localTime:function(){return(0,o.time2DateAndHM)(this.themeTime?this.themeTime:"")},threadInfo:function(){var t=this.$store.getters["session/get"]("thread");return t},attachmentList:function(){var t=this.fileList,e=this.threadInfo;return t.forEach((function(i,n){t[n].format=i.fileName.substring(i.fileName.lastIndexOf(".")+1).toUpperCase(),e.attachmentPrice>0&&e.price>0&&(t[n].url="".concat(t[n].url,"&isAttachment=1"))})),t},attachmentIsPreview:function(){var t=!1;return t=!!(this.threadInfo.price<=0&&this.threadInfo.attachmentPrice<=0&&this.forums.qcloud.qcloud_cos&&this.forums.qcloud.qcloud_cos_doc_preview)||(!!(this.threadInfo.price<=0&&this.threadInfo.attachmentPrice>0&&this.forums.qcloud.qcloud_cos&&this.forums.qcloud.qcloud_cos_doc_preview&&this.threadInfo.isPaidAttachment)||!!(this.threadInfo.price>0&&this.threadInfo.isPaid&&this.forums.qcloud.qcloud_cos&&this.forums.qcloud.qcloud_cos_doc_preview)),t}},created:function(){Object.keys(this.postGoods).length>0&&(-1!==this.postGoods.price.indexOf("-")||Number(this.postGoods.price)>0?this.dataGoodInfoPrice=this.postGoods.price:Number(this.postGoods.price)<=0&&(this.dataGoodInfoPrice="")),this.$forceUpdate(),this.videoContext=wx.createVideoContext("myVideo",this)},mounted:function(){this.blocKwidth=660/this.videoWidth*this.videoHeight},methods:{selectClick:function(){this.seleShow=!this.seleShow},selectChoice:function(t){this.$emit("selectChoice",t),this.seleShow=!1},personJump:function(){this.$emit("personJump",this.userId)},beAskClick:function(t){this.$emit("beAskClick",t)},videocoverClick:function(){this.$emit("videocoverClick"),console.log("点击封面图事件")},tagClick:function(t){this.$emit("tagClick",t)},imageError:function(){this.imageStatus=!1},attachmentPay:function(){this.$emit("attachmentPay")},download:function(t){var e=this.attachmentList[t],i=this;wx.downloadFile({url:e.url,success:function(t){200===t.statusCode&&(i.$refs.toast.show({message:i.i18n.t("profile.downloadSuccess")}),wx.openDocument({filePath:t.tempFilePath,success:function(t){console.log(t)}}))},error:function(){i.$refs.toast.show({message:i.i18n.t("profile.downloadError")})}})},preview:function(e){this.$store.dispatch("session/setAttachment",e);var i=this.$store.getters["session/get"]("attachment");console.log("attachment",i),t.navigateTo({url:"/pages/topic/attachment"})},audioPlay:function(t){if(this.attachmentPayStatus)this.$refs["audio".concat(t)][0].audioPause();else{var e=this.attachmentList,i=this;e.forEach((function(e){t!==e._jv.id&&-1!==["MP3","M4A","WAV","AAC"].indexOf(e.format)&&i.$refs["audio".concat(e._jv.id)][0].audioPause()}))}},fullscreenPlay:function(t){this.attachmentPayStatus||this.$refs["video".concat(t)][0].fullscreenPlay()},topicPosition:function(){var e=this.threadPosition;t.navigateTo({url:"/pages/topic/position?longitude=".concat(e[2],"&latitude=").concat(e[3])})},previewPicture:function(){this.$emit("previewPicture")},previewAudio:function(){this.$emit("previewAudio")},serBtn:function(){var t=this,e={include:["posts.replyUser","user.groups","user","posts","posts.user","posts.likedUsers","posts.images","firstPost","firstPost.likedUsers","firstPost.images","firstPost.postGoods","firstPost.attachments","rewardedUsers","category","threadVideo","threadAudio","paidUsers","user.groups.permissionWithoutCategories"]},i=a.status.run((function(){return t.$store.dispatch("jv/get",["threads/".concat(t.themid),{params:e}])}));i.then((function(){t.sun="none",t.videoShow=!0,t.autoplay=!0,setTimeout((function(){t.videoContext.play(),t.videoContext.requestFullScreen()}),200)}))},btnFun:function(){this.serBtn()},watchClick:function(){this.$emit("watchClick")},queClick:function(){this.$emit("queClick")},audioPlayer:function(t){this.$refs["audio".concat(t)].audioPause()},buyGood:function(){this.$emit("buyGood")}}};e.default=s}).call(this,i("543d")["default"])},e9c0:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={quiAvatar:function(){return Promise.all([i.e("common/vendor"),i.e("components/qui-avatar/qui-avatar")]).then(i.bind(null,"ce3f"))},quiUparse:function(){return Promise.all([i.e("common/vendor"),i.e("components/qui-uparse/qui-uparse")]).then(i.bind(null,"62d3"))},quiAudioCell:function(){return i.e("components/qui-audio-cell/qui-audio-cell").then(i.bind(null,"7889"))},quiImage:function(){return i.e("components/qui-image/qui-image").then(i.bind(null,"10f2"))},quiAudio:function(){return i.e("components/qui-audio/qui-audio").then(i.bind(null,"da89"))},quiIcon:function(){return i.e("components/qui-icon/qui-icon").then(i.bind(null,"5d1d"))},quiVideo:function(){return i.e("components/qui-video/qui-video").then(i.bind(null,"0963"))},quiToast:function(){return i.e("components/qui-toast/qui-toast").then(i.bind(null,"6512"))}},o=function(){var t=this,e=t.$createElement,i=(t._self._c,1==t.topicStatus&&5===t.themeType?t.i18n.t("home.to"):null),n=1==t.topicStatus&&5===t.themeType?t.i18n.t("home.putQuestions"):null,o=1==t.topicStatus&&t.payStatus&&1!==t.themeParts?t.$u.light():null,a=1==t.topicStatus&&t.attachmentList.length>0?t.i18n.t("profile.attachment"):null,u=1==t.topicStatus&&t.attachmentList.length>0?t.__map(t.attachmentList,(function(e,i){var n=t.__get_orig(e),o=["MP3","M4A","WAV","AAC"].indexOf(e.format),a=-1===o?["PPTX","PPT","POT","POTX","PPS","PPSX","DPS","DPT","PPTM","POTM","PPSM","DOC","DOT","WPS","WPT","DOCX","DOTX","DOCM","DOTM","PDF","LRC","C","CPP","H","ASM","S","JAVA","ASP","BAT","BAS","PRG","CMD","RTF","TXT","LOG","XML","HTM","HTML"].indexOf(e.format):null,u=-1===o&&t.attachmentIsPreview&&e.isRemote&&-1!==a?t.i18n.t("topic.preview"):null,s=["MP4"].indexOf(e.format),r=-1!==s?t.i18n.t("profile.play"):null;return{$orig:n,g4:o,g5:a,g6:u,g7:s,g8:r}})):null,s=1==t.topicStatus&&t.postGoodsStatus&&6===t.themeType?t.i18n.t("home.buygood"):null;t._isMounted||(t.e0=function(e){t.attachmentPayStatus&&t.attachmentPay()},t.e1=function(e,i){var n=arguments[arguments.length-1].currentTarget.dataset,o=n.eventParams||n["event-params"];i=o.index;!t.attachmentPayStatus&&t.download(i)},t.e2=function(e,i){var n=arguments[arguments.length-1].currentTarget.dataset,o=n.eventParams||n["event-params"];i=o.index;!t.attachmentPayStatus&&t.download(i)}),t.$mp.data=Object.assign({},{$root:{g0:i,g1:n,g2:o,g3:a,l0:u,g9:s}})},a=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/qui-topic-content/qui-topic-content-create-component',
    {
        'components/qui-topic-content/qui-topic-content-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("ab17"))
        })
    },
    [['components/qui-topic-content/qui-topic-content-create-component']]
]);
